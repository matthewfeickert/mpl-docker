
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="X-UA-Compatible" content="IE=Edge" />
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MEP10: Docstring consistency &#8212; Matplotlib 3.3.0rc1+229.g97785f2e6 documentation</title>
    <link rel="stylesheet" href="../../_static/mpl.css?v3.3.0rc1-229-g97785f2e6" type="text/css" />
    <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" type="text/css" href="../../_static/graphviz.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/copybutton.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/gallery.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/gallery-binder.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/gallery-dataframe.css" />
    <script id="documentation_options" data-url_root="../../" src="../../_static/documentation_options.js"></script>
    <script src="../../_static/jquery.js"></script>
    <script src="../../_static/underscore.js"></script>
    <script src="../../_static/doctools.js"></script>
    <script src="../../_static/language_data.js"></script>
    <script src="../../_static/clipboard.min.js"></script>
    <script src="../../_static/copybutton.js"></script>
    <script async="async" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.7/latest.js?config=TeX-AMS-MML_HTMLorMML"></script>
    <link rel="search" type="application/opensearchdescription+xml"
          title="Search within Matplotlib 3.3.0rc1+229.g97785f2e6 documentation"
          href="../../_static/opensearch.xml"/>
    <link rel="shortcut icon" href="../../_static/favicon.ico"/>

    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="MEP11: Third-party dependencies" href="MEP11.html" />
    <link rel="prev" title="MEP9: Global interaction manager" href="MEP09.html" />
<link rel="top" title="Matplotlib 3.3.0rc1+229.g97785f2e6 documentation" href="#" />
    <link rel="canonical" href="https://matplotlib.org/devdocs/devel/MEP/MEP10.html" />
   
  <link rel="stylesheet" href="../../_static/custom.css" type="text/css" />
  
  
  <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9" />

  </head><body>

<div id="unreleased-message">
    You are reading documentation for the unreleased version of Matplotlib.
    <a href="https://matplotlib.org/search.html?q=MEP10%3A%20Docstring%20consistency&amp;check_keywords=yes&amp;area=default">
        Try searching for the released version of this page instead?
    </a>
</div>

<!--
<div id="annc-banner">

</div>
-->

<div style="background-color: white; text-align: left; padding: 10px 10px 15px 15px; position: relative;">
    <a href="../../index.html">
        <div style="float: left; position: absolute; width: 496px; bottom: 0; padding-bottom: 24px"><span style="float: right; color: #789; background: white">Version 3.3.0rc1+229.g97785f2e6</span></div>
        <img src="../../_static/logo2_compressed.svg" height="125px" border="0" alt="matplotlib"/></a>

    <!-- The "Fork me on github" ribbon -->
    <div id="forkongithub"><a href="https://github.com/matplotlib/matplotlib">Fork me on GitHub</a></div>
    </div>

    <nav class="main-nav">
        <ul>
            <li><a href="../../users/installing.html">Installation</a></li>
            <li><a href="../../contents.html">Documentation</a></li>
            <li><a href="../../gallery/index.html">Examples</a></li>
            <li><a href="../../tutorials/index.html">Tutorials</a></li>
            <li><a href="../index.html">Contributing</a></li>
            <li class="nav-right">
                <form class="search" action="../../search.html" method="get">
                <input type="text" name="q" aria-labelledby="searchlabel" placeholder="Search"/>
                </form>
            </li>
        </ul>
     </nav>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../../genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="../../py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="MEP11.html" title="MEP11: Third-party dependencies"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="MEP09.html" title="MEP9: Global interaction manager"
             accesskey="P">previous</a> |</li>
        <li><a href="../../index.html">home</a>|&nbsp;</li>
        <li><a href="../../contents.html">contents</a> &raquo;</li>
          <li class="nav-item nav-item-1"><a href="../index.html" >The Matplotlib Developers' Guide</a> &#187;</li>
          <li class="nav-item nav-item-2"><a href="index.html" accesskey="U">Matplotlib Enhancement Proposals</a> &#187;</li>
        <li class="nav-item nav-item-this"><a href="">MEP10: Docstring consistency</a></li> 
      </ul>
    </div>

      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
  <h3><a href="../../contents.html">Table of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">MEP10: Docstring consistency</a><ul>
<li><a class="reference internal" href="#status">Status</a></li>
<li><a class="reference internal" href="#branches-and-pull-requests">Branches and Pull requests</a></li>
<li><a class="reference internal" href="#abstract">Abstract</a></li>
<li><a class="reference internal" href="#detailed-description">Detailed description</a><ul>
<li><a class="reference internal" href="#numpy-docstring-format">Numpy docstring format</a></li>
<li><a class="reference internal" href="#cross-references">Cross references</a></li>
<li><a class="reference internal" href="#overriding-signatures">Overriding signatures</a></li>
<li><a class="reference internal" href="#linking-rather-than-duplicating">Linking rather than duplicating</a></li>
<li><a class="reference internal" href="#autosummary-extension">autosummary extension</a></li>
<li><a class="reference internal" href="#examples-linking-to-relevant-documentation">Examples linking to relevant documentation</a></li>
<li><a class="reference internal" href="#documentation-using-help-vs-a-browser">Documentation using help() vs. a browser</a></li>
</ul>
</li>
<li><a class="reference internal" href="#implementation">Implementation</a></li>
<li><a class="reference internal" href="#backward-compatibility">Backward compatibility</a></li>
<li><a class="reference internal" href="#alternatives">Alternatives</a></li>
</ul>
</li>
</ul>
<div class="relations">
<h3>Related Topics</h3>
<ul>
  <li><a href="../../contents.html">Documentation overview</a><ul>
  <li><a href="../index.html">The Matplotlib Developers' Guide</a><ul>
  <li><a href="index.html">Matplotlib Enhancement Proposals</a><ul>
      <li>Previous: <a href="MEP09.html" title="previous chapter">MEP9: Global interaction manager</a></li>
      <li>Next: <a href="MEP11.html" title="next chapter">MEP11: Third-party dependencies</a></li>
  </ul></li>
  </ul></li>
  </ul></li>
</ul>
</div>
  <div id="sidebar-pagesource" role="note" aria-label="source link"
    style="margin-top: 1.5em; padding-top: 0.1em; border-top: 1px solid #86989b">
  <a href="../../_sources/devel/MEP/MEP10.rst.txt"
     style="color: #c0c0c0" rel="nofollow">Show Page Source</a>
  </div>
        </div>
      </div>

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          

          <div class="body" role="main">
            
  <div class="section" id="mep10-docstring-consistency">
<h1>MEP10: Docstring consistency<a class="headerlink" href="#mep10-docstring-consistency" title="Permalink to this headline">¶</a></h1>
<div class="contents local topic" id="contents">
<ul class="simple">
<li><a class="reference internal" href="#status" id="id2">Status</a></li>
<li><a class="reference internal" href="#branches-and-pull-requests" id="id3">Branches and Pull requests</a></li>
<li><a class="reference internal" href="#abstract" id="id4">Abstract</a></li>
<li><a class="reference internal" href="#detailed-description" id="id5">Detailed description</a><ul>
<li><a class="reference internal" href="#numpy-docstring-format" id="id6">Numpy docstring format</a></li>
<li><a class="reference internal" href="#cross-references" id="id7">Cross references</a></li>
<li><a class="reference internal" href="#overriding-signatures" id="id8">Overriding signatures</a></li>
<li><a class="reference internal" href="#linking-rather-than-duplicating" id="id9">Linking rather than duplicating</a></li>
<li><a class="reference internal" href="#autosummary-extension" id="id10">autosummary extension</a></li>
<li><a class="reference internal" href="#examples-linking-to-relevant-documentation" id="id11">Examples linking to relevant documentation</a></li>
<li><a class="reference internal" href="#documentation-using-help-vs-a-browser" id="id12">Documentation using help() vs. a browser</a></li>
</ul>
</li>
<li><a class="reference internal" href="#implementation" id="id13">Implementation</a></li>
<li><a class="reference internal" href="#backward-compatibility" id="id14">Backward compatibility</a></li>
<li><a class="reference internal" href="#alternatives" id="id15">Alternatives</a></li>
</ul>
</div>
<div class="section" id="status">
<h2><a class="toc-backref" href="#id2">Status</a><a class="headerlink" href="#status" title="Permalink to this headline">¶</a></h2>
<p><strong>Progress</strong></p>
<p>This is still an on-going effort</p>
</div>
<div class="section" id="branches-and-pull-requests">
<h2><a class="toc-backref" href="#id3">Branches and Pull requests</a><a class="headerlink" href="#branches-and-pull-requests" title="Permalink to this headline">¶</a></h2>
</div>
<div class="section" id="abstract">
<h2><a class="toc-backref" href="#id4">Abstract</a><a class="headerlink" href="#abstract" title="Permalink to this headline">¶</a></h2>
<p>matplotlib has a great deal of inconsistency between docstrings.  This
not only makes the docs harder to read, but it is harder on
contributors, because they don't know which specifications to follow.
There should be a clear docstring convention that is followed
consistently.</p>
<p>The organization of the API documentation is difficult to follow.
Some pages, such as pyplot and axes, are enormous and hard to browse.
There should instead be short summary tables that link to detailed
documentation.  In addition, some of the docstrings themselves are
quite long and contain redundant information.</p>
<p>Building the documentation takes a long time and uses a <code class="file docutils literal notranslate"><span class="pre">make.py</span></code>
script rather than a Makefile.</p>
</div>
<div class="section" id="detailed-description">
<h2><a class="toc-backref" href="#id5">Detailed description</a><a class="headerlink" href="#detailed-description" title="Permalink to this headline">¶</a></h2>
<p>There are number of new tools and conventions available since
matplotlib started using Sphinx that make life easier.  The following
is a list of proposed changes to docstrings, most of which involve
these new features.</p>
<div class="section" id="numpy-docstring-format">
<h3><a class="toc-backref" href="#id6">Numpy docstring format</a><a class="headerlink" href="#numpy-docstring-format" title="Permalink to this headline">¶</a></h3>
<p><a class="reference external" href="https://github.com/numpy/numpy/blob/master/doc/HOWTO_DOCUMENT.rst.txt">Numpy docstring format</a>:
This format divides the docstring into clear sections, each having
different parsing rules that make the docstring easy to read both as
raw text and as HTML.  We could consider alternatives, or invent our
own, but this is a strong choice, as it's well used and understood in
the Numpy/Scipy community.</p>
</div>
<div class="section" id="cross-references">
<h3><a class="toc-backref" href="#id7">Cross references</a><a class="headerlink" href="#cross-references" title="Permalink to this headline">¶</a></h3>
<p>Most of the docstrings in matplotlib use explicit &quot;roles&quot; when linking
to other items, for example: <code class="docutils literal notranslate"><span class="pre">:func:`myfunction`</span></code>.  As of Sphinx
0.4, there is a &quot;default_role&quot; that can be set to &quot;obj&quot;, which will
polymorphically link to a Python object of any type.  This allows one
to write <code class="docutils literal notranslate"><span class="pre">`myfunction`</span></code> instead.  This makes docstrings much easier
to read and edit as raw text.  Additionally, Sphinx allows for setting
a current module, so links like <code class="docutils literal notranslate"><span class="pre">`~matplotlib.axes.Axes.set_xlim`</span></code>
could be written as <code class="docutils literal notranslate"><span class="pre">`~axes.Axes.set_xlim`</span></code>.</p>
</div>
<div class="section" id="overriding-signatures">
<h3><a class="toc-backref" href="#id8">Overriding signatures</a><a class="headerlink" href="#overriding-signatures" title="Permalink to this headline">¶</a></h3>
<p>Many methods in matplotlib use the <code class="docutils literal notranslate"><span class="pre">*args</span></code> and <code class="docutils literal notranslate"><span class="pre">**kwargs</span></code> syntax
to dynamically handle the keyword arguments that are accepted by the
function, or to delegate on to another function.  This, however, is
often not useful as a signature in the documentation.  For this
reason, many matplotlib methods include something like:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">annotate</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Create an annotation: a piece of text referring to a data</span>
<span class="sd">    point.</span>

<span class="sd">    Call signature::</span>

<span class="sd">      annotate(s, xy, xytext=None, xycoords=&#39;data&#39;,</span>
<span class="sd">               textcoords=&#39;data&#39;, arrowprops=None, **kwargs)</span>
<span class="sd">    &quot;&quot;&quot;</span>
</pre></div>
</div>
<p>This can't be parsed by Sphinx, and is rather verbose in raw text.  As
of Sphinx 1.1, if the <code class="docutils literal notranslate"><span class="pre">autodoc_docstring_signature</span></code> config value is
set to True, Sphinx will extract a replacement signature from the
first line of the docstring, allowing this:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">annotate</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    annotate(s, xy, xytext=None, xycoords=&#39;data&#39;,</span>
<span class="sd">               textcoords=&#39;data&#39;, arrowprops=None, **kwargs)</span>

<span class="sd">    Create an annotation: a piece of text referring to a data</span>
<span class="sd">    point.</span>
<span class="sd">    &quot;&quot;&quot;</span>
</pre></div>
</div>
<p>The explicit signature will replace the actual Python one in the
generated documentation.</p>
</div>
<div class="section" id="linking-rather-than-duplicating">
<h3><a class="toc-backref" href="#id9">Linking rather than duplicating</a><a class="headerlink" href="#linking-rather-than-duplicating" title="Permalink to this headline">¶</a></h3>
<p>Many of the docstrings include long lists of accepted keywords by
interpolating things into the docstring at load time.  This makes the
docstrings very long.  Also, since these tables are the same across
many docstrings, it inserts a lot of redundant information in the docs
-- particularly a problem in the printed version.</p>
<p>These tables should be moved to docstrings on functions whose only
purpose is for help.  The docstrings that refer to these tables should
link to them, rather than including them verbatim.</p>
</div>
<div class="section" id="autosummary-extension">
<h3><a class="toc-backref" href="#id10">autosummary extension</a><a class="headerlink" href="#autosummary-extension" title="Permalink to this headline">¶</a></h3>
<p>The Sphinx autosummary extension should be used to generate summary
tables, that link to separate pages of documentation.  Some classes
that have many methods (e.g. <a class="reference internal" href="../../api/axes_api.html#matplotlib.axes.Axes" title="matplotlib.axes.Axes"><code class="xref py py-obj docutils literal notranslate"><span class="pre">Axes</span></code></a>) should be documented with
one method per page, whereas smaller classes should have all of their
methods together.</p>
</div>
<div class="section" id="examples-linking-to-relevant-documentation">
<h3><a class="toc-backref" href="#id11">Examples linking to relevant documentation</a><a class="headerlink" href="#examples-linking-to-relevant-documentation" title="Permalink to this headline">¶</a></h3>
<p>The examples, while helpful at illustrating how to use a feature, do
not link back to the relevant docstrings.  This could be addressed by
adding module-level docstrings to the examples, and then including
that docstring in the parsed content on the example page.  These
docstrings could easily include references to any other part of the
documentation.</p>
</div>
<div class="section" id="documentation-using-help-vs-a-browser">
<h3><a class="toc-backref" href="#id12">Documentation using help() vs. a browser</a><a class="headerlink" href="#documentation-using-help-vs-a-browser" title="Permalink to this headline">¶</a></h3>
<p>Using Sphinx markup in the source allows for good-looking docs in your
browser, but the markup also makes the raw text returned using help()
look terrible. One of the aims of improving the docstrings should be
to make both methods of accessing the docs look good.</p>
</div>
</div>
<div class="section" id="implementation">
<h2><a class="toc-backref" href="#id13">Implementation</a><a class="headerlink" href="#implementation" title="Permalink to this headline">¶</a></h2>
<ol class="arabic simple">
<li>The numpydoc extensions should be turned on for matplotlib.  There
is an important question as to whether these should be included in
the matplotlib source tree, or used as a dependency.  Installing
Numpy is not sufficient to get the numpydoc extensions -- it's a
separate install procedure.  In any case, to the extent that they
require customization for our needs, we should endeavor to submit
those changes upstream and not fork them.</li>
<li>Manually go through all of the docstrings and update them to the
new format and conventions.  Updating the cross references (from
<code class="docutils literal notranslate"><span class="pre">`:func:`myfunc`</span></code> to <code class="docutils literal notranslate"><span class="pre">`func`</span></code>) may be able to be
semi-automated.  This is a lot of busy work, and perhaps this labor
should be divided on a per-module basis so no single developer is
over-burdened by it.</li>
<li>Reorganize the API docs using autosummary and <code class="xref py py-obj docutils literal notranslate"><span class="pre">sphinx-autogen</span></code>.
This should hopefully have minimal impact on the narrative
documentation.</li>
<li>Modify the example page generator (<code class="file docutils literal notranslate"><span class="pre">gen_rst.py</span></code>) so that it
extracts the module docstring from the example and includes it in a
non-literal part of the example page.</li>
<li>Use <code class="xref py py-obj docutils literal notranslate"><span class="pre">sphinx-quickstart</span></code> to generate a new-style Sphinx Makefile.
The following features in the current <code class="file docutils literal notranslate"><span class="pre">make.py</span></code> will have to be
addressed in some other way:<ul>
<li>Copying of some static content</li>
<li>Specifying a &quot;small&quot; build (only low-resolution PNG files for examples)</li>
</ul>
</li>
</ol>
<p>Steps 1, 2, and 3 are interdependent.  4 and 5 may be done
independently, though 5 has some dependency on 3.</p>
</div>
<div class="section" id="backward-compatibility">
<h2><a class="toc-backref" href="#id14">Backward compatibility</a><a class="headerlink" href="#backward-compatibility" title="Permalink to this headline">¶</a></h2>
<p>As this mainly involves docstrings, there should be minimal impact on
backward compatibility.</p>
</div>
<div class="section" id="alternatives">
<h2><a class="toc-backref" href="#id15">Alternatives</a><a class="headerlink" href="#alternatives" title="Permalink to this headline">¶</a></h2>
<p>None yet discussed.</p>
</div>
</div>


          </div>
          
        </div>
      </div>
      <div class="clearer"></div>
    </div>
<footer>
    <div class="footer">
    &copy; Copyright 2002 - 2012 John Hunter, Darren Dale, Eric Firing, Michael Droettboom and the Matplotlib development team; 2012 - 2020 The Matplotlib development team.
<br />
    Last updated on Jul 12, 2020.
Created using
<a href="http://sphinx-doc.org/">Sphinx</a> 3.1.2.
Doc version v3.3.0rc1-229-g97785f2e6.
    </div>
</footer>
<script>
        (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
        (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
        m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
        })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

        ga('create', 'UA-55954603-1', 'auto');
        ga('send', 'pageview');

</script>
  </body>
</html>