
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="X-UA-Compatible" content="IE=Edge" />
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MEP25: Serialization &#8212; Matplotlib 3.3.0rc1+229.g97785f2e6 documentation</title>
    <link rel="stylesheet" href="../../_static/mpl.css?v3.3.0rc1-229-g97785f2e6" type="text/css" />
    <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" type="text/css" href="../../_static/graphviz.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/copybutton.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/gallery.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/gallery-binder.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/gallery-dataframe.css" />
    <script id="documentation_options" data-url_root="../../" src="../../_static/documentation_options.js"></script>
    <script src="../../_static/jquery.js"></script>
    <script src="../../_static/underscore.js"></script>
    <script src="../../_static/doctools.js"></script>
    <script src="../../_static/language_data.js"></script>
    <script src="../../_static/clipboard.min.js"></script>
    <script src="../../_static/copybutton.js"></script>
    <script async="async" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.7/latest.js?config=TeX-AMS-MML_HTMLorMML"></script>
    <link rel="search" type="application/opensearchdescription+xml"
          title="Search within Matplotlib 3.3.0rc1+229.g97785f2e6 documentation"
          href="../../_static/opensearch.xml"/>
    <link rel="shortcut icon" href="../../_static/favicon.ico"/>

    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="MEP26: Artist styling" href="MEP26.html" />
    <link rel="prev" title="MEP24: negative radius in polar plots" href="MEP24.html" />
<link rel="top" title="Matplotlib 3.3.0rc1+229.g97785f2e6 documentation" href="#" />
    <link rel="canonical" href="https://matplotlib.org/devdocs/devel/MEP/MEP25.html" />
   
  <link rel="stylesheet" href="../../_static/custom.css" type="text/css" />
  
  
  <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9" />

  </head><body>

<div id="unreleased-message">
    You are reading documentation for the unreleased version of Matplotlib.
    <a href="https://matplotlib.org/search.html?q=MEP25%3A%20Serialization&amp;check_keywords=yes&amp;area=default">
        Try searching for the released version of this page instead?
    </a>
</div>

<!--
<div id="annc-banner">

</div>
-->

<div style="background-color: white; text-align: left; padding: 10px 10px 15px 15px; position: relative;">
    <a href="../../index.html">
        <div style="float: left; position: absolute; width: 496px; bottom: 0; padding-bottom: 24px"><span style="float: right; color: #789; background: white">Version 3.3.0rc1+229.g97785f2e6</span></div>
        <img src="../../_static/logo2_compressed.svg" height="125px" border="0" alt="matplotlib"/></a>

    <!-- The "Fork me on github" ribbon -->
    <div id="forkongithub"><a href="https://github.com/matplotlib/matplotlib">Fork me on GitHub</a></div>
    </div>

    <nav class="main-nav">
        <ul>
            <li><a href="../../users/installing.html">Installation</a></li>
            <li><a href="../../contents.html">Documentation</a></li>
            <li><a href="../../gallery/index.html">Examples</a></li>
            <li><a href="../../tutorials/index.html">Tutorials</a></li>
            <li><a href="../index.html">Contributing</a></li>
            <li class="nav-right">
                <form class="search" action="../../search.html" method="get">
                <input type="text" name="q" aria-labelledby="searchlabel" placeholder="Search"/>
                </form>
            </li>
        </ul>
     </nav>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../../genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="../../py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="MEP26.html" title="MEP26: Artist styling"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="MEP24.html" title="MEP24: negative radius in polar plots"
             accesskey="P">previous</a> |</li>
        <li><a href="../../index.html">home</a>|&nbsp;</li>
        <li><a href="../../contents.html">contents</a> &raquo;</li>
          <li class="nav-item nav-item-1"><a href="../index.html" >The Matplotlib Developers' Guide</a> &#187;</li>
          <li class="nav-item nav-item-2"><a href="index.html" accesskey="U">Matplotlib Enhancement Proposals</a> &#187;</li>
        <li class="nav-item nav-item-this"><a href="">MEP25: Serialization</a></li> 
      </ul>
    </div>

      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
  <h3><a href="../../contents.html">Table of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">MEP25: Serialization</a><ul>
<li><a class="reference internal" href="#status">Status</a></li>
<li><a class="reference internal" href="#branches-and-pull-requests">Branches and Pull requests</a></li>
<li><a class="reference internal" href="#abstract">Abstract</a></li>
<li><a class="reference internal" href="#detailed-description">Detailed description</a></li>
<li><a class="reference internal" href="#examples">Examples</a></li>
<li><a class="reference internal" href="#implementation">Implementation</a></li>
<li><a class="reference internal" href="#backward-compatibility">Backward compatibility</a></li>
<li><a class="reference internal" href="#alternatives">Alternatives</a></li>
</ul>
</li>
</ul>
<div class="relations">
<h3>Related Topics</h3>
<ul>
  <li><a href="../../contents.html">Documentation overview</a><ul>
  <li><a href="../index.html">The Matplotlib Developers' Guide</a><ul>
  <li><a href="index.html">Matplotlib Enhancement Proposals</a><ul>
      <li>Previous: <a href="MEP24.html" title="previous chapter">MEP24: negative radius in polar plots</a></li>
      <li>Next: <a href="MEP26.html" title="next chapter">MEP26: Artist styling</a></li>
  </ul></li>
  </ul></li>
  </ul></li>
</ul>
</div>
  <div id="sidebar-pagesource" role="note" aria-label="source link"
    style="margin-top: 1.5em; padding-top: 0.1em; border-top: 1px solid #86989b">
  <a href="../../_sources/devel/MEP/MEP25.rst.txt"
     style="color: #c0c0c0" rel="nofollow">Show Page Source</a>
  </div>
        </div>
      </div>

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          

          <div class="body" role="main">
            
  <div class="section" id="mep25-serialization">
<h1>MEP25: Serialization<a class="headerlink" href="#mep25-serialization" title="Permalink to this headline">¶</a></h1>
<div class="contents local topic" id="contents">
<ul class="simple">
<li><a class="reference internal" href="#status" id="id1">Status</a></li>
<li><a class="reference internal" href="#branches-and-pull-requests" id="id2">Branches and Pull requests</a></li>
<li><a class="reference internal" href="#abstract" id="id3">Abstract</a></li>
<li><a class="reference internal" href="#detailed-description" id="id4">Detailed description</a></li>
<li><a class="reference internal" href="#examples" id="id5">Examples</a></li>
<li><a class="reference internal" href="#implementation" id="id6">Implementation</a></li>
<li><a class="reference internal" href="#backward-compatibility" id="id7">Backward compatibility</a></li>
<li><a class="reference internal" href="#alternatives" id="id8">Alternatives</a></li>
</ul>
</div>
<div class="section" id="status">
<h2><a class="toc-backref" href="#id1">Status</a><a class="headerlink" href="#status" title="Permalink to this headline">¶</a></h2>
<p><strong>Rejected</strong></p>
<p>This work is important, but this particular effort has stalled.</p>
</div>
<div class="section" id="branches-and-pull-requests">
<h2><a class="toc-backref" href="#id2">Branches and Pull requests</a><a class="headerlink" href="#branches-and-pull-requests" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li>development branches:</li>
<li>related pull requests:</li>
</ul>
</div>
<div class="section" id="abstract">
<h2><a class="toc-backref" href="#id3">Abstract</a><a class="headerlink" href="#abstract" title="Permalink to this headline">¶</a></h2>
<p>This MEP aims at adding a serializable <code class="docutils literal notranslate"><span class="pre">Controller</span></code> objects to act
as an <code class="docutils literal notranslate"><span class="pre">Artist</span></code> managers. Users would then communicate changes to an
<code class="docutils literal notranslate"><span class="pre">Artist</span></code> via a <code class="docutils literal notranslate"><span class="pre">Controller</span></code>. In this way, functionality of the
<code class="docutils literal notranslate"><span class="pre">Controller</span></code> objects may be added incrementally since each
<code class="docutils literal notranslate"><span class="pre">Artist</span></code> is still responsible for drawing everything. The goal is to
create an API that is usable both by graphing libraries requiring
high-level descriptions of figures and libraries requiring low-level
interpretations.</p>
</div>
<div class="section" id="detailed-description">
<h2><a class="toc-backref" href="#id4">Detailed description</a><a class="headerlink" href="#detailed-description" title="Permalink to this headline">¶</a></h2>
<p>Matplotlib is a core plotting engine with an API that many users
already understand. It's difficult/impossible for other graphing
libraries to (1) get a complete figure description, (2) output raw
data from the figure object as the user has provided it, (3)
understand the semantics of the figure objects without heuristics,
and (4) give matplotlib a complete figure description to visualize. In
addition, because an <code class="docutils literal notranslate"><span class="pre">Artist</span></code> has no conception of its own semantics
within the figure, it's difficult to interact with them in a natural
way.</p>
<p>In this sense, matplotlib will adopt a standard
Model-View-Controller (MVC) framework. The <em>Model</em> will be the user
defined data, style, and semantics. The <em>Views</em> are the ensemble of
each individual <code class="docutils literal notranslate"><span class="pre">Artist</span></code>, which are responsible for producing the
final image based on the <em>model</em>. The <em>Controller</em> will be the
<code class="docutils literal notranslate"><span class="pre">Controller</span></code> object managing its set of <code class="docutils literal notranslate"><span class="pre">Artist</span></code> objects.</p>
<p>The <code class="docutils literal notranslate"><span class="pre">Controller</span></code> must be able to export the information that it's
carrying about the figure on command, perhaps via a <code class="docutils literal notranslate"><span class="pre">to_json</span></code> method
or similar. Because it would be extremely extraneous to duplicate all
of the information in the model with the controller, only
user-specified information (data + style) are explicitly kept. If a
user wants more information (defaults) from the view/model, it should
be able to query for it.</p>
<ul class="simple">
<li>This might be annoying to do, non-specified kwargs are pulled from
the rcParams object which is in turn created from reading a user
specified file and can be dynamically changed at run time.  I
suppose we could keep a dict of default defaults and compare against
that. Not clear how this will interact with the style sheet
[[MEP26]] - &#64;tacaswell</li>
</ul>
<p>Additional Notes:</p>
<ul class="simple">
<li>The &quot;raw data&quot; does not necessarily need to be a <code class="docutils literal notranslate"><span class="pre">list</span></code>,
<code class="docutils literal notranslate"><span class="pre">ndarray</span></code>, etc. Rather, it can more abstractly just have a method
to yield data when needed.</li>
<li>Because the <code class="docutils literal notranslate"><span class="pre">Controller</span></code> will contain extra information that users
may not want to keep around, it should <em>not</em> be created by
default. You should be able to both (a) instantiate a <code class="docutils literal notranslate"><span class="pre">Controller</span></code>
with a figure and (b) build a figure with a <code class="docutils literal notranslate"><span class="pre">Controller</span></code>.</li>
</ul>
<p>Use Cases:</p>
<ul class="simple">
<li>Export all necessary informat</li>
<li>Serializing a matplotlib figure, saving it, and being able to rerun later.</li>
<li>Any other source sending an appropriately formatted representation to matplotlib to open</li>
</ul>
</div>
<div class="section" id="examples">
<h2><a class="toc-backref" href="#id5">Examples</a><a class="headerlink" href="#examples" title="Permalink to this headline">¶</a></h2>
<p>Here are some examples of what the controllers should be able to do.</p>
<ol class="arabic">
<li><p class="first">Instantiate a matplotlib figure from a serialized representation (e.g., JSON):</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">json</span>
<span class="kn">from</span> <span class="nn">matplotlib.controllers</span> <span class="kn">import</span> <span class="n">Controller</span>
<span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="s1">&#39;my_figure&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
    <span class="n">o</span> <span class="o">=</span> <span class="n">json</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="n">f</span><span class="p">)</span>
<span class="n">c</span> <span class="o">=</span> <span class="n">Controller</span><span class="p">(</span><span class="n">o</span><span class="p">)</span>
<span class="n">fig</span> <span class="o">=</span> <span class="n">c</span><span class="o">.</span><span class="n">figure</span>
</pre></div>
</div>
</li>
<li><p class="first">Manage artists from the controller (e.g., Line2D):</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># not really sure how this should look</span>
<span class="n">c</span><span class="o">.</span><span class="n">axes</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">lines</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">color</span> <span class="o">=</span> <span class="s1">&#39;b&#39;</span>
<span class="c1"># ?</span>
</pre></div>
</div>
</li>
<li><p class="first">Export serializable figure representation:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">o</span> <span class="o">=</span> <span class="n">c</span><span class="o">.</span><span class="n">to_json</span><span class="p">()</span>
<span class="c1"># or... we should be able to throw a figure object in there too</span>
<span class="n">o</span> <span class="o">=</span> <span class="n">Controller</span><span class="o">.</span><span class="n">to_json</span><span class="p">(</span><span class="n">mpl_fig</span><span class="p">)</span>
</pre></div>
</div>
</li>
</ol>
</div>
<div class="section" id="implementation">
<h2><a class="toc-backref" href="#id6">Implementation</a><a class="headerlink" href="#implementation" title="Permalink to this headline">¶</a></h2>
<ol class="arabic">
<li><p class="first">Create base <code class="docutils literal notranslate"><span class="pre">Controller</span></code> objects that are able to manage
<code class="docutils literal notranslate"><span class="pre">Artist</span></code> objects (e.g., <code class="docutils literal notranslate"><span class="pre">Hist</span></code>)</p>
<blockquote>
<div><p>Comments:</p>
<ul class="simple">
<li>initialization should happen via unpacking <code class="docutils literal notranslate"><span class="pre">**</span></code>, so we need a
copy of call signature parameter for the <code class="docutils literal notranslate"><span class="pre">Artist</span></code> we're
ultimately trying to control. Unfortunate hard-coded
repetition...</li>
<li>should the additional <code class="docutils literal notranslate"><span class="pre">**kwargs</span></code> accepted by each <code class="docutils literal notranslate"><span class="pre">Artist</span></code>
be tracked at the <code class="docutils literal notranslate"><span class="pre">Controller</span></code></li>
<li>how does a <code class="docutils literal notranslate"><span class="pre">Controller</span></code> know which artist belongs where? E.g.,
do we need to pass <code class="docutils literal notranslate"><span class="pre">axes</span></code> references?</li>
</ul>
<p>Progress:</p>
<ul class="simple">
<li>A simple NB demonstrating some functionality for
<code class="docutils literal notranslate"><span class="pre">Line2DController</span></code> objects:
<a class="reference external" href="https://nbviewer.jupyter.org/gist/theengineear/f0aa8d79f64325e767c0">https://nbviewer.jupyter.org/gist/theengineear/f0aa8d79f64325e767c0</a></li>
</ul>
</div></blockquote>
</li>
<li><p class="first">Write in protocols for the <code class="docutils literal notranslate"><span class="pre">Controller</span></code> to <em>update</em> the model.</p>
<blockquote>
<div><p>Comments:</p>
<ul class="simple">
<li>how should containers be dealt with? E.g., what happens to old
patches when we re-bin a histogram?</li>
<li>in the link from (1), the old line is completely destroyed and
redrawn, what if something is referencing it?</li>
</ul>
</div></blockquote>
</li>
<li><p class="first">Create method by which a json object can be assembled from the
<code class="docutils literal notranslate"><span class="pre">Controllers</span></code></p>
</li>
<li><p class="first">Deal with serializing the unserializable aspects of a figure (e.g.,
non-affine transforms?)</p>
</li>
<li><p class="first">Be able to instantiate from a serialized representation</p>
</li>
<li><p class="first">Reimplement the existing pyplot and Axes method,
e.g. <code class="docutils literal notranslate"><span class="pre">pyplot.hist</span></code> and <code class="docutils literal notranslate"><span class="pre">Axes.hist</span></code> in terms of the new
controller class.</p>
</li>
</ol>
<p>&gt; &#64;theengineer: in #2 above, what do you mean by <em>get updates</em> from
each <code class="docutils literal notranslate"><span class="pre">Artist</span></code>?</p>
<p>^ Yup. The <code class="docutils literal notranslate"><span class="pre">Controller</span></code> <em>shouldn't</em> need to get updated. This just
happens in #3. Delete comments when you see this.</p>
</div>
<div class="section" id="backward-compatibility">
<h2><a class="toc-backref" href="#id7">Backward compatibility</a><a class="headerlink" href="#backward-compatibility" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li>pickling will change</li>
<li>non-affine transformations will require a defined pickling method</li>
</ul>
</div>
<div class="section" id="alternatives">
<h2><a class="toc-backref" href="#id8">Alternatives</a><a class="headerlink" href="#alternatives" title="Permalink to this headline">¶</a></h2>
<p>PR #3150 suggested adding semantics by parasitically attaching extra
containers to axes objects. This is a more complete solution with what
should be a more developed/flexible/powerful framework.</p>
</div>
</div>


          </div>
          
        </div>
      </div>
      <div class="clearer"></div>
    </div>
<footer>
    <div class="footer">
    &copy; Copyright 2002 - 2012 John Hunter, Darren Dale, Eric Firing, Michael Droettboom and the Matplotlib development team; 2012 - 2020 The Matplotlib development team.
<br />
    Last updated on Jul 12, 2020.
Created using
<a href="http://sphinx-doc.org/">Sphinx</a> 3.1.2.
Doc version v3.3.0rc1-229-g97785f2e6.
    </div>
</footer>
<script>
        (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
        (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
        m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
        })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

        ga('create', 'UA-55954603-1', 'auto');
        ga('send', 'pageview');

</script>
  </body>
</html>