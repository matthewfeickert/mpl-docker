
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="X-UA-Compatible" content="IE=Edge" />
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MEP9: Global interaction manager &#8212; Matplotlib 3.3.0rc1+229.g97785f2e6 documentation</title>
    <link rel="stylesheet" href="../../_static/mpl.css?v3.3.0rc1-229-g97785f2e6" type="text/css" />
    <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" type="text/css" href="../../_static/graphviz.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/copybutton.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/gallery.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/gallery-binder.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/gallery-dataframe.css" />
    <script id="documentation_options" data-url_root="../../" src="../../_static/documentation_options.js"></script>
    <script src="../../_static/jquery.js"></script>
    <script src="../../_static/underscore.js"></script>
    <script src="../../_static/doctools.js"></script>
    <script src="../../_static/language_data.js"></script>
    <script src="../../_static/clipboard.min.js"></script>
    <script src="../../_static/copybutton.js"></script>
    <script async="async" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.7/latest.js?config=TeX-AMS-MML_HTMLorMML"></script>
    <link rel="search" type="application/opensearchdescription+xml"
          title="Search within Matplotlib 3.3.0rc1+229.g97785f2e6 documentation"
          href="../../_static/opensearch.xml"/>
    <link rel="shortcut icon" href="../../_static/favicon.ico"/>

    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="MEP10: Docstring consistency" href="MEP10.html" />
    <link rel="prev" title="MEP8: PEP8" href="MEP08.html" />
<link rel="top" title="Matplotlib 3.3.0rc1+229.g97785f2e6 documentation" href="#" />
    <link rel="canonical" href="https://matplotlib.org/devdocs/devel/MEP/MEP09.html" />
   
  <link rel="stylesheet" href="../../_static/custom.css" type="text/css" />
  
  
  <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9" />

  </head><body>

<div id="unreleased-message">
    You are reading documentation for the unreleased version of Matplotlib.
    <a href="https://matplotlib.org/search.html?q=MEP9%3A%20Global%20interaction%20manager&amp;check_keywords=yes&amp;area=default">
        Try searching for the released version of this page instead?
    </a>
</div>

<!--
<div id="annc-banner">

</div>
-->

<div style="background-color: white; text-align: left; padding: 10px 10px 15px 15px; position: relative;">
    <a href="../../index.html">
        <div style="float: left; position: absolute; width: 496px; bottom: 0; padding-bottom: 24px"><span style="float: right; color: #789; background: white">Version 3.3.0rc1+229.g97785f2e6</span></div>
        <img src="../../_static/logo2_compressed.svg" height="125px" border="0" alt="matplotlib"/></a>

    <!-- The "Fork me on github" ribbon -->
    <div id="forkongithub"><a href="https://github.com/matplotlib/matplotlib">Fork me on GitHub</a></div>
    </div>

    <nav class="main-nav">
        <ul>
            <li><a href="../../users/installing.html">Installation</a></li>
            <li><a href="../../contents.html">Documentation</a></li>
            <li><a href="../../gallery/index.html">Examples</a></li>
            <li><a href="../../tutorials/index.html">Tutorials</a></li>
            <li><a href="../index.html">Contributing</a></li>
            <li class="nav-right">
                <form class="search" action="../../search.html" method="get">
                <input type="text" name="q" aria-labelledby="searchlabel" placeholder="Search"/>
                </form>
            </li>
        </ul>
     </nav>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../../genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="../../py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="MEP10.html" title="MEP10: Docstring consistency"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="MEP08.html" title="MEP8: PEP8"
             accesskey="P">previous</a> |</li>
        <li><a href="../../index.html">home</a>|&nbsp;</li>
        <li><a href="../../contents.html">contents</a> &raquo;</li>
          <li class="nav-item nav-item-1"><a href="../index.html" >The Matplotlib Developers' Guide</a> &#187;</li>
          <li class="nav-item nav-item-2"><a href="index.html" accesskey="U">Matplotlib Enhancement Proposals</a> &#187;</li>
        <li class="nav-item nav-item-this"><a href="">MEP9: Global interaction manager</a></li> 
      </ul>
    </div>

      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
  <h3><a href="../../contents.html">Table of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">MEP9: Global interaction manager</a><ul>
<li><a class="reference internal" href="#status">Status</a></li>
<li><a class="reference internal" href="#branches-and-pull-requests">Branches and Pull requests</a></li>
<li><a class="reference internal" href="#abstract">Abstract</a></li>
<li><a class="reference internal" href="#detailed-description">Detailed description</a></li>
<li><a class="reference internal" href="#implementation">Implementation</a></li>
<li><a class="reference internal" href="#current-summary-of-the-mixin">Current summary of the mixin</a></li>
<li><a class="reference internal" href="#backward-compatibility">Backward compatibility</a></li>
<li><a class="reference internal" href="#alternatives">Alternatives</a></li>
</ul>
</li>
</ul>
<div class="relations">
<h3>Related Topics</h3>
<ul>
  <li><a href="../../contents.html">Documentation overview</a><ul>
  <li><a href="../index.html">The Matplotlib Developers' Guide</a><ul>
  <li><a href="index.html">Matplotlib Enhancement Proposals</a><ul>
      <li>Previous: <a href="MEP08.html" title="previous chapter">MEP8: PEP8</a></li>
      <li>Next: <a href="MEP10.html" title="next chapter">MEP10: Docstring consistency</a></li>
  </ul></li>
  </ul></li>
  </ul></li>
</ul>
</div>
  <div id="sidebar-pagesource" role="note" aria-label="source link"
    style="margin-top: 1.5em; padding-top: 0.1em; border-top: 1px solid #86989b">
  <a href="../../_sources/devel/MEP/MEP09.rst.txt"
     style="color: #c0c0c0" rel="nofollow">Show Page Source</a>
  </div>
        </div>
      </div>

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          

          <div class="body" role="main">
            
  <div class="section" id="mep9-global-interaction-manager">
<h1>MEP9: Global interaction manager<a class="headerlink" href="#mep9-global-interaction-manager" title="Permalink to this headline">¶</a></h1>
<div class="contents local topic" id="contents">
<ul class="simple">
<li><a class="reference internal" href="#status" id="id1">Status</a></li>
<li><a class="reference internal" href="#branches-and-pull-requests" id="id2">Branches and Pull requests</a></li>
<li><a class="reference internal" href="#abstract" id="id3">Abstract</a></li>
<li><a class="reference internal" href="#detailed-description" id="id4">Detailed description</a></li>
<li><a class="reference internal" href="#implementation" id="id5">Implementation</a></li>
<li><a class="reference internal" href="#current-summary-of-the-mixin" id="id6">Current summary of the mixin</a></li>
<li><a class="reference internal" href="#backward-compatibility" id="id7">Backward compatibility</a></li>
<li><a class="reference internal" href="#alternatives" id="id8">Alternatives</a></li>
</ul>
</div>
<p>Add a global manager for all user interactivity with artists; make any
artist resizeable, moveable, highlightable, and selectable as desired
by the user.</p>
<div class="section" id="status">
<h2><a class="toc-backref" href="#id1">Status</a><a class="headerlink" href="#status" title="Permalink to this headline">¶</a></h2>
<p><strong>Discussion</strong></p>
</div>
<div class="section" id="branches-and-pull-requests">
<h2><a class="toc-backref" href="#id2">Branches and Pull requests</a><a class="headerlink" href="#branches-and-pull-requests" title="Permalink to this headline">¶</a></h2>
<p><a class="reference external" href="https://github.com/dhyams/matplotlib/tree/MEP9">https://github.com/dhyams/matplotlib/tree/MEP9</a></p>
</div>
<div class="section" id="abstract">
<h2><a class="toc-backref" href="#id3">Abstract</a><a class="headerlink" href="#abstract" title="Permalink to this headline">¶</a></h2>
<p>The goal is to be able to interact with matplotlib artists in a very
similar way as drawing programs do.  When appropriate, the user should
be able to move, resize, or select an artist that is already on the
canvas.  Of course, the script writer is ultimately in control of
whether an artist is able to be interacted with, or whether it is
static.</p>
<p>This code to do this has already been privately implemented and
tested, and would need to be migrated from its current &quot;mixin&quot;
implementation, to a bona-fide part of matplotlib.</p>
<p>The end result would be to have four new keywords available to
matplotlib.artist.Artist: _moveable_, _resizeable_, _selectable_, and
_highlightable_.  Setting any one of these keywords to True would
activate interactivity for that artist.</p>
<p>In effect, this MEP is a logical extension of event handling in
matplotlib; matplotlib already supports &quot;low level&quot; interactions like
left mouse presses, a key press, or similar.  The MEP extends the
support to the logical level, where callbacks are performed on the
artists when certain interactive gestures from the user are detected.</p>
</div>
<div class="section" id="detailed-description">
<h2><a class="toc-backref" href="#id4">Detailed description</a><a class="headerlink" href="#detailed-description" title="Permalink to this headline">¶</a></h2>
<p>This new functionality would be used to allow the end-user to better
interact with the graph.  Many times, a graph is almost what the user
wants, but a small repositioning and/or resizing of components is
necessary.  Rather than force the user to go back to the script to
trial-and-error the location, and simple drag and drop would be
appropriate.</p>
<p>Also, this would better support applications that use matplotlib;
here, the end-user has no reasonable access or desire to edit the
underlying source in order to fine-tune a plot.  Here, if matplotlib
offered the capability, one could move or resize artists on the canvas
to suit their needs.  Also, the user should be able to highlight (with
a mouse over) an artist, and select it with a double-click, if the
application supports that sort of thing.  In this MEP, we also want to
support the highlighting and selection natively; it is up to
application to handle what happens when the artist is selected.  A
typical handling would be to display a dialog to edit the properties
of the artist.</p>
<p>In the future, as well (this is not part of this MEP), matplotlib
could offer backend-specific property dialogs for each artist, which
are raised on artist selection.  This MEP would be a necessary
stepping stone for that sort of capability.</p>
<p>There are currently a few interactive capabilities in matplotlib
(e.g. legend.draggable()), but they tend to be scattered and are not
available for all artists.  This MEP seeks to unify the interactive
interface and make it work for all artists.</p>
<p>The current MEP also includes grab handles for resizing artists, and
appropriate boxes drawn when artists are moved or resized.</p>
</div>
<div class="section" id="implementation">
<h2><a class="toc-backref" href="#id5">Implementation</a><a class="headerlink" href="#implementation" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li>Add appropriate methods to the &quot;tree&quot; of artists so that the
interactivity manager has a consistent interface for the
interactivity manager to deal with.  The proposed methods to add to
the artists, if they are to support interactivity, are:<ul>
<li>get_pixel_position_ll(self): get the pixel position of the lower
left corner of the artist's bounding box</li>
<li>get_pixel_size(self): get the size of the artist's bounding box,
in pixels</li>
<li>set_pixel_position_and_size(self,x,y,dx,dy): set the new size of
the artist, such that it fits within the specified bounding box.</li>
</ul>
</li>
<li>add capability to the backends to 1) provide cursors, since these
are needed for visual indication of moving/resizing, and 2) provide
a function that gets the current mouse position</li>
<li>Implement the manager.  This has already been done privately (by
dhyams) as a mixin, and has been tested quite a bit.  The goal would
be to move the functionality of the manager into the artists so that
it is in matplotlib properly, and not as a &quot;monkey patch&quot; as I
currently have it coded.</li>
</ul>
</div>
<div class="section" id="current-summary-of-the-mixin">
<h2><a class="toc-backref" href="#id6">Current summary of the mixin</a><a class="headerlink" href="#current-summary-of-the-mixin" title="Permalink to this headline">¶</a></h2>
<p>(Note that this mixin is for now just private code, but can be added
to a branch obviously)</p>
<p>InteractiveArtistMixin:</p>
<p>Mixin class to make any generic object that is drawn on a matplotlib
canvas moveable and possibly resizeable.  The Powerpoint model is
followed as closely as possible; not because I'm enamoured with
Powerpoint, but because that's what most people understand.  An artist
can also be selectable, which means that the artist will receive the
on_activated() callback when double clicked.  Finally, an artist can
be highlightable, which means that a highlight is drawn on the artist
whenever the mouse passes over.  Typically, highlightable artists will
also be selectable, but that is left up to the user.  So, basically
there are four attributes that can be set by the user on a per-artist
basis:</p>
<ul class="simple">
<li>highlightable</li>
<li>selectable</li>
<li>moveable</li>
<li>resizeable</li>
</ul>
<p>To be moveable (draggable) or resizeable, the object that is the
target of the mixin must support the following protocols:</p>
<ul class="simple">
<li>get_pixel_position_ll(self)</li>
<li>get_pixel_size(self)</li>
<li>set_pixel_position_and_size(self,x,y,sx,sy)</li>
</ul>
<p>Note that nonresizeable objects are free to ignore the sx and sy
parameters. To be highlightable, the object that is the target of the
mixin must also support the following protocol:</p>
<ul class="simple">
<li>get_highlight(self)</li>
</ul>
<p>Which returns a list of artists that will be used to draw the highlight.</p>
<p>If the object that is the target of the mixin is not an matplotlib
artist, the following protocols must also be implemented.  Doing so is
usually fairly trivial, as there has to be an artist <em>somewhere</em> that
is being drawn.  Typically your object would just route these calls to
that artist.</p>
<ul class="simple">
<li>get_figure(self)</li>
<li>get_axes(self)</li>
<li>contains(self,event)</li>
<li>set_animated(self,flag)</li>
<li>draw(self,renderer)</li>
<li>get_visible(self)</li>
</ul>
<p>The following notifications are called on the artist, and the artist
can optionally implement these.</p>
<ul class="simple">
<li>on_select_begin(self)</li>
<li>on_select_end(self)</li>
<li>on_drag_begin(self)</li>
<li>on_drag_end(self)</li>
<li>on_activated(self)</li>
<li>on_highlight(self)</li>
<li>on_right_click(self,event)</li>
<li>on_left_click(self,event)</li>
<li>on_middle_click(self,event)</li>
<li>on_context_click(self,event)</li>
<li>on_key_up(self,event)</li>
<li>on_key_down(self,event)</li>
</ul>
<p>The following notifications are called on the canvas, if no
interactive artist handles the event:</p>
<ul class="simple">
<li>on_press(self,event)</li>
<li>on_left_click(self,event)</li>
<li>on_middle_click(self,event)</li>
<li>on_right_click(self,event)</li>
<li>on_context_click(self,event)</li>
<li>on_key_up(self,event)</li>
<li>on_key_down(self,event)</li>
</ul>
<p>The following functions, if present, can be used to modify the
behavior of the interactive object:</p>
<ul class="simple">
<li>press_filter(self,event) # determines if the object wants to have
the press event routed to it</li>
<li>handle_unpicked_cursor() # can be used by the object to set a cursor
as the cursor passes over the object when it is unpicked.</li>
</ul>
<p>Supports multiple canvases, maintaining a drag lock, motion notifier,
and a global &quot;enabled&quot; flag per canvas. Supports fixed aspect ratio
resizings by holding the shift key during the resize.</p>
<p>Known problems:</p>
<ul class="simple">
<li>Zorder is not obeyed during the selection/drag operations.  Because
of the blit technique used, I do not believe this can be fixed.  The
only way I can think of is to search for all artists that have a
zorder greater then me, set them all to animated, and then redraw
them all on top during each drag refresh.  This might be very slow;
need to try.</li>
<li>the mixin only works for wx backends because of two things: 1) the
cursors are hardcoded, and 2) there is a call to
wx.GetMousePosition() Both of these shortcomings are reasonably
fixed by having each backend supply these things.</li>
</ul>
</div>
<div class="section" id="backward-compatibility">
<h2><a class="toc-backref" href="#id7">Backward compatibility</a><a class="headerlink" href="#backward-compatibility" title="Permalink to this headline">¶</a></h2>
<p>No problems with backward compatibility, although once this is in
place, it would be appropriate to obsolete some of the existing
interactive functions (like legend.draggable())</p>
</div>
<div class="section" id="alternatives">
<h2><a class="toc-backref" href="#id8">Alternatives</a><a class="headerlink" href="#alternatives" title="Permalink to this headline">¶</a></h2>
<p>None that I know of.</p>
</div>
</div>


          </div>
          
        </div>
      </div>
      <div class="clearer"></div>
    </div>
<footer>
    <div class="footer">
    &copy; Copyright 2002 - 2012 John Hunter, Darren Dale, Eric Firing, Michael Droettboom and the Matplotlib development team; 2012 - 2020 The Matplotlib development team.
<br />
    Last updated on Jul 12, 2020.
Created using
<a href="http://sphinx-doc.org/">Sphinx</a> 3.1.2.
Doc version v3.3.0rc1-229-g97785f2e6.
    </div>
</footer>
<script>
        (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
        (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
        m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
        })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

        ga('create', 'UA-55954603-1', 'auto');
        ga('send', 'pageview');

</script>
  </body>
</html>